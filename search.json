[{"title":"Sqoop导数到Hive字符集问题","url":"/2021/12/02/Sqoop%E5%AF%BC%E6%95%B0%E5%88%B0Hive%E5%AD%97%E7%AC%A6%E9%9B%86%E9%97%AE%E9%A2%98/","content":"使用sqoop从RDBMS将数据导入hive时，由于sqoop设置的分隔符类型和hive创建表时指定的分隔符不一致，会导致数据错误解析，造成多行或者多列占用同一列等问题。\nsqoop import数据导入过程中关于分隔符设置可以指定的几个参数：–fields-terminated-by  : 每行各字段间的分隔符，sqoop导入数据默认以逗号分割的TEXTFILE文件格式，但是如果导入的是hive的外表，而hive外表TEXT文件格式默认是以Tab作为字段分隔符的，所以 一般sqoop数据导入hive TEXTFILE表时该参数指定为 ‘\\t’ 。\n–lines-terminated-by  : 指定数据行分隔符，默认为 ‘\\n’ ，当导入数据字段中含有 ‘\\n’ 特殊字符后，需要制定该参数。\nescaped-by  ：制定转义字符，默认为 ‘&#39; ，当数据字段中含有 ‘&#39; 特殊字符时，需要指定转义字符，但是一般要考虑该参数对其余参数的影响，比如，制定了 –null-string ‘\\n’ 后，如果修改转义字符，sqoop导入的空字符串就无法正确表示了，应该同时修改该参数为 –null-string ‘n’\n–enclosed-by  ：指定字符串包围字符，如果数据中字符串含有特定的包围符，比如 “leo”,”12” ，可以设置该参数进行解析 –enclosed-by ‘“‘ ，通常需要和 escaped-by  配合使用。\n–mysql-delimeters ：使用mysql默认分隔符，字段 ‘,’ ，行 ‘\\n’ ，转义字符 ‘&#39; ，字段包围符 ‘ 。\n–hive-drop-import-delims ：当sqoop import时，导入数据字段中含有HIVE的默认特殊字符 例如：’\\n’ ‘\\r’ ‘,’ ‘\\01’ ，可能会导致导入数据出现问题，通常需要添加该参数来删除导入数据中的这些特殊字符。或者使用replace参数。–hive-delims-replacement ： 用自定义字符替换sqoop import导入数据中的特殊字符。\n同步hive中设置：\nCREATE EXTERNAL TABLE tmp.test (id STRING COMMENT &#x27;id&#x27;,name STRING)COMMENT &#x27;测试表&#x27;ROW FORMAT DELIMITEDFIELDS TERMINATED BY &#x27;\\t&#x27; ESCAPED BY &#x27;\\&#x27;LINES TERMINATED BY &#x27;\\n&#x27;STORED AS TEXTFILELOCATION &#x27;hdfs_path&#x27;;","categories":["Sqoop"],"tags":["Sqoop","Hive"]}]